<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:replace="fragments/header :: header"/>
    <th:block th:replace="fragments/mainHeader :: mainHeader"/>

    <style>
        #mainContainer {
            width: 80%;
            margin: auto;
        }

        #cafeDetailTop ul {
            display: flex;
        }

        #cafeDetailTop ul li {
            font-size: 0.8em;
            color: black;
            margin-right: 10px;
            padding: 3px 4px;
            border: solid 1px lightslategray;
            border-radius: 50%;
        }

        #cafeDetailTop .titleBox {
            font-weight: bold;
        }

        #cafeDetailMiddle {
            display: flex;
            padding-top: 50px;
        }

        #cafeDetailMiddle .leftImgBox {
            width: 65%;
            /*height: 20%;*/
        }

        #cafeDetailMiddle .leftImgBox .carousel-inner div img {
            height: 600px;
        }

        #cafeDetailMiddle .rightInfoBox {
            width: 33%;
        }

        #cafeDetailMiddle .rightInfoBox {
            margin-left: 50px;
        }

        #calendar {
            height: 500px;
        }

        .titleBox {
            font-weight: bold;
            font-size: 30px;
        }

        .infoBox {
            color: #9B9B9B;
        }

        .eventButton {
            width: 400px;
            border: none;
            paddinb: 20px;
            background-color: #4C7A01;
            color: white;
            font-size: 20px;
            font-weight: bold;
            border-radius: 5px;
        }

        #eventRegisterBtn {
            padding-top: 10px;
            text-align: center;
            margin: auto;
        }

        #cafeDetailTop ul li {
            background-color: darkorange;
            color: white;
            border-radius: 0px 0px 5px 0px;
            font-family: 'Poor Story', cursive;
            border: none;
        }

        #cafePriceInfo {
            background-color: #F5F5DC;
            border-radius: 0px 0px 20px 0px;
            margin-top: 10px;
            font-weight: bold;
            padding-left: 20px;
            padding-top: 10px;
            padding-bottom: 5px;
        }

        #cafeDetailBottom {
            background-color: floralwhite;
            padding: 30px;
            margin-top: 20px;
        }

    </style>
</head>
<body>
<div th:replace="fragments/mainTop :: mainTop"/>
<div class="topBanner">
    <div class="topFont">ì¹´í˜ ìƒì„¸ í˜ì´ì§€</div>
</div>
<button th:onclick="|location.href='@{/cafes/updateForm(id=${cafeDetailResponseDto.getCafeNumber()})}'|">ìˆ˜ì •</button>
<form id="delete-form" th:action="@{'/cafes/' + ${cafeDetailResponseDto.getCafeNumber()}}" method="post">
    <input type="hidden" name="_method" value="DELETE"/>
    <button>ì‚­ì œí•˜ê¸°</button>
</form>
<div id="mainContainer">
    <section id="cafeDetailTop">
        <div class="titleBox">
            <h1 th:text="${cafeDetailResponseDto.getCafeName()}"></h1>
        </div>
        <div class="infoBox">
            <h3 th:text="${cafeDetailResponseDto.getCafeInfo()}"></h3>
        </div>
        <div class="optionBox">
            <ul>
                <li class="optionList" th:each="cafeOption : ${cafeDetailResponseDto.getCafeOptions()}"
                    th:text="'#'+${cafeOption}"></li>
            </ul>
        </div>
    </section>
    <hr>
    <section id="cafeDetailMiddle">
        <div class="leftImgBox">
            <!-- Carousel -->
            <div id="demo" class="carousel slide" data-bs-ride="carousel">
                <!--     ì´ë¯¸ì§€ ìŠ¬ë¼ì´ë“œ íƒ€ì„ë¦¬í”„ë¡œ ì²˜ë¦¬í•˜ëŠ”ë²• ëª¨ë¥´ê² ìŠˆ  activeê°€ ê»´ìˆì–´ì„œ ì´ê±¸ ì–´ë–»ê²Œ í•´ì•¼í•˜ë‚˜ ë¬¸ì œë„¤     -->
                <!-- The slideshow/carousel -->
                <div class="carousel-inner">
                    <!--                    <div class="carousel-item active" th:each="cafeImg : ${cafeDetailResponseDto.getCafeImgUrls()}">-->
                    <div class="carousel-item active">
                        <img alt="Los Angeles" class="d-block" style="width:100%"
                             th:src="${cafeDetailResponseDto.getCafeImgUrls().get(0)}">
                        <div class="carousel-caption">
                        </div>
                    </div>
                    <!--                <div class="carousel-item">-->
                    <!--                    <img alt="Chicago" class="d-block" src="/banner2.png" style="width:100%">-->
                    <!--                    <div class="carousel-caption">-->
                    <!--                    </div>-->
                    <!--                </div>-->
                    <!--                <div class="carousel-item">-->
                    <!--                    <img alt="New York" class="d-block" src="/banner3.png" style="width:100%">-->
                    <!--                    <div class="carousel-caption">-->
                    <!--                    </div>-->
                    <!--                </div>-->
                </div>

                <!-- Left and right controls/icons -->
                <button class="carousel-control-prev" type="button" data-bs-target="#demo" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#demo" data-bs-slide="next">
                    <span class="carousel-control-next-icon"></span>
                </button>
            </div>
        </div>
        <div class="rightInfoBox">
            <div id='calendar-container'>
                <div id='calendar'></div>
            </div>
            <div id="cafePriceInfo">
                <p th:text="'ğŸ“Œ í‰ì¼ ê°€ê²©' + ${#numbers.formatInteger(cafeDetailResponseDto.getCafeWeekdayPrice(), 3, 'COMMA') + 'ì›'}"></p>
                <p th:text="'ğŸ“Œ ì£¼ë§ ê°€ê²©' + ${#numbers.formatInteger(cafeDetailResponseDto.getCafeWeekendPrice(), 3, 'COMMA') + 'ì›'}"></p>
            </div>
            <div id="eventRegisterBtn">
                <button class="eventButton"
                        th:onclick="|location.href='@{/events/registration(cafeId=${cafeDetailResponseDto.getCafeNumber()})}'|">
                    ì´ë²¤íŠ¸ ì˜ˆì•½í•˜ê¸°
                </button>
            </div>
        </div>
    </section>
    <section id="cafeDetailBottom">
        <hr>
        <div id="cafeInfoDetail">
            <h3>ìƒì„¸ ì •ë³´</h3>
            <h5 th:text="${cafeDetailResponseDto.getCafeInfoDetail()}"></h5>
        </div>
        <div id="openHour">
            <span>ì˜ì—… ì‹œê°„ : </span>
            <span th:text="${cafeDetailResponseDto.getCafeOpenTime()} + ' ~ ' + ${cafeDetailResponseDto.getCafeCloseTime()}"></span>
        </div>
        <div id="cafePrecaution">
            <h3>ìœ ì˜ì‚¬í•­</h3>
            <p th:text="${cafeDetailResponseDto.getCafePrecaution()}"></p>
        </div>
        <div id="cafeLocationInfo">
            <div class="cafeAddress">
                <p th:text="${cafeDetailResponseDto.getCafeZonecode()} + ' &nbsp;' + ${cafeDetailResponseDto.getCafeAddress()}"></p>
                <p th:text="${cafeDetailResponseDto.getCafeAddressDetail()}"></p>
            </div>
            <div id="staticMap" style="width:600px;height:350px;"></div>
        </div>
    </section>
</div>
</body>
<script th:inline="javascript">
    let x = [[${cafeDetailResponseDto.getCafeX()}]];
    let y = [[${cafeDetailResponseDto.getCafeY()}]];
    let id = [[${cafeDetailResponseDto.getCafeNumber()}]];
</script>
<script src="/js/cafe/kakaoMapForDetail.js"></script>
<script>
    (function () {
        $(function () {
            // calendar element ì·¨ë“
            var calendarEl = $('#calendar')[0];
            // full-calendar ìƒì„±í•˜ê¸°
            var calendar = new FullCalendar.Calendar(calendarEl, {
                height: '500px', // calendar ë†’ì´ ì„¤ì •
                expandRows: true, // í™”ë©´ì— ë§ê²Œ ë†’ì´ ì¬ì„¤ì •
                // slotMinTime: '08:00', // Day ìº˜ë¦°ë”ì—ì„œ ì‹œì‘ ì‹œê°„
                // slotMaxTime: '20:00', // Day ìº˜ë¦°ë”ì—ì„œ ì¢…ë£Œ ì‹œê°„
                // í•´ë”ì— í‘œì‹œí•  íˆ´ë°”
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    // right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
                    right: 'dayGridMonth'
                },
                initialView: 'dayGridMonth', // ì´ˆê¸° ë¡œë“œ ë ë•Œ ë³´ì´ëŠ” ìº˜ë¦°ë” í™”ë©´(ê¸°ë³¸ ì„¤ì •: ë‹¬)
                // initialDate: '2021-07-15', // ì´ˆê¸° ë‚ ì§œ ì„¤ì • (ì„¤ì •í•˜ì§€ ì•Šìœ¼ë©´ ì˜¤ëŠ˜ ë‚ ì§œê°€ ë³´ì¸ë‹¤.)
                // navLinks: true, // ë‚ ì§œë¥¼ ì„ íƒí•˜ë©´ Day ìº˜ë¦°ë”ë‚˜ Week ìº˜ë¦°ë”ë¡œ ë§í¬
                editable: true, // ìˆ˜ì • ê°€ëŠ¥?
                selectable: true, // ë‹¬ë ¥ ì¼ì ë“œë˜ê·¸ ì„¤ì •ê°€ëŠ¥
                nowIndicator: true, // í˜„ì¬ ì‹œê°„ ë§ˆí¬
                dayMaxEvents: true, // ì´ë²¤íŠ¸ê°€ ì˜¤ë²„ë˜ë©´ ë†’ì´ ì œí•œ (+ ëª‡ ê°œì‹ìœ¼ë¡œ í‘œí˜„)
                locale: 'ko', // í•œêµ­ì–´ ì„¤ì •
                eventAdd: function (obj) { // ì´ë²¤íŠ¸ê°€ ì¶”ê°€ë˜ë©´ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸
                    console.log(obj);
                },
                eventChange: function (obj) { // ì´ë²¤íŠ¸ê°€ ìˆ˜ì •ë˜ë©´ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸
                    console.log(obj);
                },
                eventRemove: function (obj) { // ì´ë²¤íŠ¸ê°€ ì‚­ì œë˜ë©´ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸
                    console.log(obj);
                },
                select: function (arg) { // ìº˜ë¦°ë”ì—ì„œ ë“œë˜ê·¸ë¡œ ì´ë²¤íŠ¸ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤.
                    // var title = prompt('Event Title:');
                    // if (title) {
                    //     calendar.addEvent({
                    //         title: title,
                    //         start: arg.start,
                    //         end: arg.end,
                    //         allDay: arg.allDay
                    //     })
                    // }
                    // calendar.unselect()
                },
                // ì´ë²¤íŠ¸
                events: [
                    {
                        title: 'All Day Event',
                        start: '2021-07-01',
                    },
                    {
                        title: 'Long Event',
                        start: '2022-07-11',
                        end: '2021-07-12'
                    },
                    {
                        groupId: 999,
                        title: 'Repeating Event',
                        start: '2022-07-10'
                    },
                    {
                        groupId: 999,
                        title: 'Repeating Event',
                        start: '2021-07-16T16:00:00'
                    },
                    {
                        title: 'Conference',
                        start: '2021-07-11',
                        end: '2021-07-13'
                    },
                    {
                        title: 'Meeting',
                        start: '2021-07-12T10:30:00',
                        end: '2021-07-12T12:30:00'
                    },
                    {
                        title: 'Lunch',
                        start: '2021-07-12T12:00:00'
                    },
                    {
                        title: 'Meeting',
                        start: '2021-07-12T14:30:00'
                    },
                    {
                        title: 'Happy Hour',
                        start: '2021-07-12T17:30:00'
                    },
                    {
                        title: 'Dinner',
                        start: '2021-07-12T20:00:00'
                    },
                    {
                        title: 'Birthday Party',
                        start: '2021-07-13T07:00:00'
                    },
                    {
                        title: 'Click for Google',
                        url: 'http://google.com/', // í´ë¦­ì‹œ í•´ë‹¹ urlë¡œ ì´ë™
                        start: '2021-07-28'
                    }
                ]
            });
            // ìº˜ë¦°ë” ëœë”ë§
            calendar.render();
        });
    })();
</script>
</html>