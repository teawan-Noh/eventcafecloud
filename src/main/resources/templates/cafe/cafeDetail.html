<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:replace="fragments/header :: header"/>
    <th:block th:replace="fragments/mainHeader :: mainHeader"/>
    <!--  paging  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paginationjs/2.1.4/pagination.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paginationjs/2.1.4/pagination.css"/>
    <link rel="stylesheet" type="text/css" href="/css/cafeDetail.css">
    <link rel="stylesheet" type="text/css" href="/css/cafeReview.css">
    <script th:inline="javascript">
        let x = [[${cafeDetailResponseDto.getCafeX()}]];
        let y = [[${cafeDetailResponseDto.getCafeY()}]];
        let id = [[${cafeDetailResponseDto.getCafeNumber()}]];
        let loginUserId = [[${userId}]];
    </script>
    <script src="/js/cafe/cafeReview.js"></script>
    <script>
        $(document).ready(function () {
            getCafeReviewList();
        });
    </script>
</head>
<body>
<div th:replace="fragments/mainTop :: mainTop"/>
<div class="topBanner">
    <div class="topFont">Ïπ¥Ìéò Ï†ïÎ≥¥</div>
</div>
<div id="mainContainer">
    <section id="cafeDetailTop">
        <div class="titleBox">
            <h1 th:text="${cafeDetailResponseDto.getCafeName()}"></h1>
        </div>
        <div class="infoBox">
            <h3 th:text="${cafeDetailResponseDto.getCafeInfo()}"></h3>
        </div>
        <div class="optionBox">
            <ul>
                <li class="optionList" th:each="cafeOption : ${cafeDetailResponseDto.getCafeOptions()}"
                    th:text="'#'+${cafeOption}"></li>
            </ul>
        </div>
    </section>
    <hr>
    <section id="cafeDetailMiddle">
        <div class="leftImgBox">
            <!-- Carousel -->
            <div id="demo" class="carousel slide" data-bs-ride="carousel">
                <!-- The slideshow/carousel -->
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img th:src="${cafeDetailResponseDto.getCafeImgUrls().get(0)}" class="d-block">
                    </div>
                    <div th:if="${cafeDetailResponseDto.getCafeImgUrls().get(1)} != null" class="carousel-item">
                        <img th:src="${cafeDetailResponseDto.getCafeImgUrls().get(1)}" class="d-block">
                    </div>
<!--                    <div th:if="${cafeDetailResponseDto.getCafeImgUrls().get(2)} != null" class="carousel-item">-->
<!--                        <img th:src="${cafeDetailResponseDto.getCafeImgUrls().get(2)}" class="d-block">-->
<!--                    </div>-->
                </div>
                <!-- Left and right controls/icons -->
                <button class="carousel-control-prev" type="button" data-bs-target="#demo" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#demo" data-bs-slide="next">
                    <span class="carousel-control-next-icon"></span>
                </button>
            </div>
        </div>
        <div class="rightInfoBox">
            <div id='calendar-container'>
                <div id='calendar'></div>
            </div>
            <div id="cafePriceInfo">
                <p th:text="'üìå ÌèâÏùº Í∞ÄÍ≤©' + ${#numbers.formatInteger(cafeDetailResponseDto.getCafeWeekdayPrice(), 3, 'COMMA') + 'Ïõê'}"></p>
                <p th:text="'üìå Ï£ºÎßê Í∞ÄÍ≤©' + ${#numbers.formatInteger(cafeDetailResponseDto.getCafeWeekendPrice(), 3, 'COMMA') + 'Ïõê'}"></p>
            </div>
            <div id="eventRegisterBtn">
                <button th:if="${userId} != null" class="eventButton" th:onclick="|location.href='@{/events/registration(cafeId=${cafeDetailResponseDto.getCafeNumber()}
                ,weekdayPrice=${cafeDetailResponseDto.getCafeWeekdayPrice()}, weekendPrice=${cafeDetailResponseDto.getCafeWeekendPrice()})}'|">
                    Ïù¥Î≤§Ìä∏ ÏòàÏïΩÌïòÍ∏∞
                </button>
                <button th:if="${userId} == null" class="eventButton" onclick='alert("Î°úÍ∑∏Ïù∏ ÌõÑ Ïù¥Ïö©Ìï¥Ï£ºÏÑ∏Ïöî!")'>Ïù¥Î≤§Ìä∏ ÏòàÏïΩÌïòÍ∏∞</button>
            </div>
        </div>
    </section>
    <section id="cafeDetailBottom">
        <hr>
        <div id="cafeInfoDetail">
            <h2>ÏÉÅÏÑ∏ Ï†ïÎ≥¥</h2>
            <p th:text="${cafeDetailResponseDto.getCafeInfoDetail()}"></p>
        </div>
        <div id="openHour">
            <span>ÏòÅÏóÖ ÏãúÍ∞Ñ : </span>
            <span th:text="${cafeDetailResponseDto.getCafeOpenTime()} + ' ~ ' + ${cafeDetailResponseDto.getCafeCloseTime()}"></span>
        </div>
        <div id="cafePrecaution">
            <h2>Ïú†ÏùòÏÇ¨Ìï≠</h2>
            <p th:text="${cafeDetailResponseDto.getCafePrecaution()}"></p>
        </div>
        <div id="cafeLocationInfo">
            <h2>Ïπ¥Ìéò ÏúÑÏπò</h2>
            <div class="cafeAddress">
                <p th:text="${cafeDetailResponseDto.getCafeZonecode()} + ' &nbsp;' + ${cafeDetailResponseDto.getCafeAddress()}"></p>
                <p th:text="${cafeDetailResponseDto.getCafeAddressDetail()}"></p>
            </div>
            <div id="staticMap" style="width:600px;height:350px;"></div>
        </div>
    </section>
    <section id="reviews">
        <h2>Ïù¥Ïö© ÌõÑÍ∏∞</h2> ÌèâÍ∑† ÌèâÏ†ê : <span th:text="${cafeDetailResponseDto.getCafeAvgStarRate()}"></span>
        <div class="star-box">
            <div class="star-rating">
                <input id="5-stars" name="rating" type="radio" value="5"/>
                <label class="star" for="5-stars">&#9733;</label>
                <input id="4-stars" name="rating" type="radio" value="4"/>
                <label class="star" for="4-stars">&#9733;</label>
                <input id="3-stars" name="rating" type="radio" value="3"/>
                <label class="star" for="3-stars">&#9733;</label>
                <input id="2-stars" name="rating" type="radio" value="2"/>
                <label class="star" for="2-stars">&#9733;</label>
                <input id="1-star" name="rating" type="radio" value="1"/>
                <label class="star" for="1-star">&#9733;</label>
            </div>
            <div class="textBox">
                <span style="color: #2b2a29">Î≥ÑÏ†êÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî</span>
            </div>
        </div>
        <div class="review-input-box">
            <div class="textarea-box">
                <textarea class="form-control" id="textarea-review" placeholder="ÌõÑÍ∏∞Î•º ÏûëÏÑ±Ìï¥Ï£ºÏÑ∏Ïöî!" style="resize: none"></textarea>
            </div>
            <div>
                <div th:if="${userId != null}">
                    <button onclick="addReview()" class="button-box">Î¶¨Î∑∞ Îì±Î°ù</button>
                </div>
                <div th:if="${userId == null}" class="button-box">
                    <button onclick='alert("Î°úÍ∑∏Ïù∏ ÌõÑ Ïù¥Ïö©Ìï¥Ï£ºÏÑ∏Ïöî!")' class="button-box">Î¶¨Î∑∞ Îì±Î°ù</button>
                </div>
            </div>
        </div>
        <div id="review-list-container"></div>
        <div id="pagination"></div>
    </section>
</div>
<div th:replace="fragments/footer :: footer"/>
</body>
<script src="/js/cafe/kakaoMapForDetail.js"></script>
<script src="/js/cafe/calenderApi.js"></script>
</html>